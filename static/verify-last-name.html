<!DOCTYPE html>
<html>
<head>
    <title>Verify Last Name</title>
    <script src="app.js" type="module"></script>
    <script src="https://cdn.jsdelivr.net/npm/ipfs-http-client/dist/index.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/web3/dist/web3.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/web3@1.5.2/dist/web3.min.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/ipfs-http-client"></script>
        <script src="https://unpkg.com/ipfsd-ctl/dist/index.min.js">
            

    window.addEventListener('load', function() {
    const web3 = new Web3(Web3.givenProvider || "ws://localhost:8545");
    

    //displayCertificates();
    // Use the web3 object here
  });
</script>
    <script src="https://cdn.jsdelivr.net/npm/web3@1.5.2/dist/web3.min.js"></script>
    <script type="text/javascript">
        window.addEventListener('load', async () => {
            if (window.ethereum) {
                window.web3 = new Web3(window.ethereum);
                try {
                    await window.ethereum.enable();
                } catch (error) {
                    console.error("User denied account access")
                }
            } else if (window.web3) {
                window.web3 = new Web3(window.web3.currentProvider);
            } else {
                console.error("No web3 provider detected");
            }

            // Set the contract address and ABI
            const contractAddress = "CONTRACT_ADDRESS";
            const abi = ABI;

            // Create a contract object using the address and ABI
            //const contract = new web3.eth.Contract(abi, contractAddress);

            // Add an event listener for the form submission
            const form = document.getElementById("verifyForm");
            form.addEventListener("submit", async (event) => {
                event.preventDefault();
                const lastName = document.getElementById("lastName").value;
                const userAddress = document.getElementById("userAddress").value;

                // Call the verifyLastName function with the provided parameters
                await rcontract.methods.verifyLastName(web3.eth.tochecksumAddress(userAddress), lastName).send({ from: web3.eth.defaultAccount })
                    .on("receipt", (receipt) => {
                        console.log(receipt);
                        alert("Last name verified successfully!");
                    })
                    .on("error", (error) => {
                        console.error(error);
                        alert("Error verifying last name.");
                    });
            });
        });
    </script>
</head>
<body>

	<div class="header">
		<h1>Index</h1>
		<nav>
			<ul>
				<li><a href="index.html">Home</a></li>
				<li><a href="set-user-data.html">Verify Age</a></li>
				<li><a href="verify-first-name.html">Verify First Name</a></li>
				<li><a href="verify-last-name.html">Verify Last Name</a></li>
				<li><a href="request-verification.html">Request Verification</a></li>
			</ul>
		</nav>
	</div>
    <h1>Verify Last Name</h1>
    <form id="verifyForm">
        <label for="userAddress">User Address:</label>
        <input type="text" id="userAddress" name="userAddress" required><br><br>
        <label for="lastName">Last Name:</label>
        <input type="text" id="lastName" name="lastName" required><br><br>
        <input type="submit" value="Verify Last Name">
    </form>
</body>
</html>
